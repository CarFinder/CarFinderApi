sudo: enabled
language: node_js
node_js:
  - "8"
before_install:
  - yarn global add typescript tslint
cache: yarn
install:
  - yarn
script:
  - tslint ./src/**/*.ts
  - yarn test:coverage
deploy:
  provider: heroku
  api_key: <%= ENV["HEROKU_API_KEY"] %>
  app: carfinderapp
  run: "node dist/src/index.ts"
  on:
    repo: CarFinder/CarFinderApi
    branch: auto-deploy
